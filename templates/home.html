{% extends "base.html"%}
{% load static %}
{% block content%}

<section class="hero" id="home">
                <img class="hero-image" src="{% static 'images/background.png' %}" alt="roj">
                <div class="hero-title">
                    <h1>OPTICS</h1>
                    <h2>Jicamarca Radio Observatory</h2>
                </div>
</section>
<section class="about-us">
            <div class="about-text">
                <h3>
                    About Us
                </h3>
                <p class="about-description">
                    The Optical Instrumentation Department of the Jicamarca Radio Observatory is part of CIELO or Cluster of Instruments for
                    Equatorial and Low-Latitude Observations.
                </p>
                <p class="about-description">
                    Under the watch of this team, there are Fabry Perot Interferometers and Allsky Imagers from different institutions such
                    us Clemson University, University of Illinois at Urbana Champaign, Boston University and the New Jersey Institute of
                    Technology.
                </p>
            </div>
            <div class="about-image">
                <img src="{% static 'images/red_fpi.png' %}" alt="map-fpi">
            </div>
</section>
<section class="instruments" id="instruments">
            <h3>Instruments</h3>
            <div class="intruments-container">
                <span><</span>
                    <a href="data/results" class="item">
                        <figure>
                        <img src="{% static 'images/instrumentJicamarca.jpg' %}" alt="instruments">
                        <span>ASI - Jicamarca</span>
                        </figure>
                        <div class="instrument-footer">
                            <p> It has a fixed lens to measure the OH bands from the
                            mesosphere and is used to detect gravity wave activity.</p>
                        </div>
                    </a>
                    <a href="data/results" class="item">
                        <figure>
                        <img src="{% static 'images/instrumentNazca.jpg' %}" alt="instruments">
                        <span>FPI - MRH</span>
                        </figure>
                        <div class="instrument-footer">
                            <p> Located in Merihill, Lima. It is the nearest instrument to Jicamarca Radio Observatory.</p>
                        </div>
                    </a>
                    <a href="data/results" class="item">
                        <figure>
                        <img src="{% static 'images/instrumentArequipa.jpg' %}" alt="instruments">
                        <span>FPI - A30</span>
                        </figure>
                        <div class="instrument-footer">
                            <p>First FPI installed in Peru. Located in Arequipa, it is one of the most important instrument of the region.</p>
                        </div>
                    </a>
                <span>></span>
            </div>
</section>
<section class="database" id="database">
            <div></div>
            <h3>Database</h3>
            <div class="database-container">
                <div class="column-database column-type">
                    <h4>Instrument Type</h4>
                    <a href="#database" class="button instrument-type" id="ASI-button" data-active="no">All Sky Imager</a>
                    <a href="#database" class="button instrument-type" id="FPI-button" data-active="no">FPI</a>
                </div>
                <div class="column-database column-instrument">
                    <h4>Instrument</h4>
                    <a href="#database" class="button instrument-name no-visible" id="MRH-button" data-active="no">MRH</a>
                    <a href="#database" class="button instrument-name no-visible" id="A30-button" data-active="no">A3O</a>
                    <a href="#database" class="button instrument-name no-visible" id="NZK-button" data-active="no">NZK</a>
                    <a href="#database" class="button instrument-name no-visible" id="ASI-Jicamarca" data-active="no">ASI Jicamarca</a>
                    <a href="#database" class="button instrument-name no-visible" id="ASI-Boston" data-active="no">ASI Boston</a>
                </div>
                <div class="column-database column-date">
                    <h4>Date</h4>
                    <form action="#database" id="form-database" onsubmit="visibleShowResults(); return false;">
                        <div class="label">
                            <input type="date" name="from" id="from">
                        </div>
                        <input type="submit" value="Search Data" class="search-data" id="search-data">
                    </form>
                </div>
                <div class="show-results column-results">
                    <p id="data-available" class="data-available no-visible">Data available! <span class='show'> <a href='data/results'>Show Results</a> </span></p>
                </div>
            </div>
</section>
<section class="contact" id="contact">
            <h3>
                Contact Us
            </h3>
            <div class="contact-content">
                <div class="sitemap">
                    <h4>
                        Site Map
                    </h4>
                    <ol>
                        <li><a href="#">Home</a></li>
                        <li><a href="#instruments">Instrument</a></li>
                        <li><a href="#database">Database</a></li>
                        <li><a href="#">Sign in</a></li>
                        <li><a href="#">Sign up</a></li>
                    </ol>
                </div>
                <div class="socialmedia">
                    <h4>
                        Social Media
                    </h4>
                    <div class="socialsection">
                        <p><img class="img-fb" src="{% static 'images/fb.png' %}" alt="fb"><img src="{% static 'images/tt.png' %}"" alt="tt"><img src="{% static 'images/yt.png' %}" alt="yt"></p>
                        <p class="contact-adress">Calle Badajoz N° 169 Urb. Mayorazgo IV Etapa <br>
                        Ate, Lima 15012 - Perú. <br>
                        (51) 13172300</p>
                    </div>
                </div>
                <div class="mailing">
                    <form action="">
                        <input type="email" name="email" id="email" placeholder="E-mail">
                        <input type="text" name="message" id="message" placeholder="Message">
                        <input type="submit" value="Submit" id="contact-submit">
                    </form>
                </div>
            </div>
</section>

{% endblock%}

{%block script%}
    <script>
        window.onscroll = function () { myFunction() };

        function myFunction() {
            if (document.documentElement.scrollTop > 50) {
                document.getElementById("header").classList.add("header-activate");
            } else {
                document.getElementById("header").classList.remove("header-activate");
            }
        }

        var showResults= document.getElementById("data-available");
        function visibleShowResults(){
            visibleState(showResults,true);
        }

        function visibleState(object,state){
            if(state){
                object.classList.remove("no-visible");
            }
            else {
                object.classList.add("no-visible");
            }
        }

        var ASI =   document.getElementById("ASI-button");
        var FPI =   document.getElementById("FPI-button");

        var MRH =   document.getElementById("MRH-button");
        var A30 =   document.getElementById("A30-button");
        var NZK =   document.getElementById("NZK-button");
        var JASI =   document.getElementById("ASI-Jicamarca");
        var BASI =   document.getElementById("ASI-Boston");

        var oneActiveInstrument = false;
        var activeInstrument = ASI
        var oneActiveStation = false;
        var activeStation = MRH

        ASI.addEventListener("click", selectionListener);
        FPI.addEventListener("click", selectionListener);


        MRH.addEventListener("click", selectionListener);
        A30.addEventListener("click", selectionListener);
        NZK.addEventListener("click", selectionListener);
        JASI.addEventListener("click", selectionListener);
        BASI.addEventListener("click", selectionListener);
        
        function colorOnClicked(object, active){
            if (object.dataset.active == "no") {
                object.classList.remove("clicked");
            }
            else if (object.dataset.active == "yes") {
                object.classList.add("clicked");
            }
        }

        function selectionListener(){
            object = this;
            if (object.classList.contains("instrument-name")){
                values = selection(oneActiveStation, activeStation  , object);
                oneActiveStation = values[0];
                activeStation = values[1];                
            }

            if(object.classList.contains("instrument-type")){
                values = selection(oneActiveInstrument, activeInstrument, object);
                oneActiveInstrument = values[0];
                activeInstrument = values[1];
                if (object.id == "FPI-button") {
                    visibleState(MRH, true);
                    visibleState(A30, true);
                    visibleState(NZK, true);
                    visibleState(JASI, false);
                    visibleState(BASI, false);
                }
                if (object.id == "ASI-button") {
                    visibleState(MRH, false);
                    visibleState(A30, false);
                    visibleState(NZK, false);
                    visibleState(JASI, true);
                    visibleState(BASI, true);
                }
            }
        }

        function selection(oneActive, active, object) {

            if (!oneActive){
                object.dataset.active = "yes"
                oneActive = true;
                active = object;
                colorOnClicked(object, active);
            }
            else if(object.dataset.active == "yes"){
                object.dataset.active = "no"
                oneActive = false;
                active = NaN
                colorOnClicked(object, active);
                }
            else{
                    active.dataset.active = "no";
                    colorOnClicked(active);
                    object.dataset.active = "yes";
                    colorOnClicked(object, active);
                    active = object; 
                }
            return [oneActive, active]

        }
    </script>

{% endblock %}